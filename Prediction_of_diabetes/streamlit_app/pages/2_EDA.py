import streamlit as st
from set_params import load_page_setting
from io import StringIO
from base_funct import transform_df_base, base_graph
from PIL import Image

st.set_page_config(
    page_title="EDA",
    page_icon="üìä"
)

# –∑–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–æ–Ω–∞ —Å—Ç–∏–ª–µ–π –∏ —Ç.–¥.
load_page_setting()

st.sidebar.header("EDA")
st.sidebar.success("–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤")
st.sidebar.success("–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö")

st.markdown("""
    # –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
    ## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–ø—É—Å–∫–æ–≤

    –†–µ—à–µ–Ω–æ –±—ã–ª–æ —É–¥–∞–ª–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å —É—Ç–µ—á–∫–∞ —Ç–∞—Ä–≥–µ—Ç–∞ –∏–ª–∏ –æ–Ω–∏ –Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã. –í –æ—Å–Ω–æ–≤–Ω–æ–º —ç—Ç–æ –ª–µ–∫–∞—Ä—Ç—Å–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã."""
)
with st.expander("–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤"):
    st.code("""
    data_eda_1 = data_eda_1.drop(['–í–æ–∑—Ä–∞—Å—Ç', '–ü–æ–ª', '–õ–∏–º—Ñ–æ—Ü–∏—Ç—ã% ', '–ê–°–¢', '–ê–õ–¢', '–ù–∞—Ç—Ä–∏–π—É—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –ø–µ–ø—Ç–∏–¥', '–°–ö–§ CKD-EPI (—Ä–∞—Å—á–µ—Ç –ø–æ –æ–±—â–µ–π —Ñ–æ—Ä–º—É–ª–µ)',
                                '–ê–Ω—Ç–∏–∞–≥—Ä–µ–≥–∞–Ω—Ç—ã, –ø—Ä–µ–ø–∞—Ä–∞—Ç 1', 'BPB –≥–æ–ª–µ–Ω–µ–π',
                                '–ò–ë–°. –ü–ò–ö–°', '–•–°–ù –ø–æ —Ñ—Ä–∞–∫—Ü–∏–∏ –≤—ã–±—Ä–æ—Å–∞, %', '–ê–Ω—Ç–∏–∫–æ–∞–≥—É–ª—è–Ω—Ç—ã, –ø—Ä–µ–ø–∞—Ä–∞—Ç', '–ì–∏–ø–æ–ª–∏–ø–∏–¥–µ–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã (—Å—Ç–∞—Ç–∏–Ω—ã)' ], axis = 1)
        
    # —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑–ª–∏—à–Ω–∏—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
    data_eda_1 = data_eda_1.drop(['–ë–ª–æ–∫–∞–¥–∞ –ù–ü –ì–∏—Å—Å–∞ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)', 
                                '–ì–∏–ø–µ—Ä—Ç—Ä–æ—Ñ–∏—è –º–∏–æ–∫–∞—Ä–¥–∞ –ª–µ–≤–æ–≥–æ –∂–µ–ª—É–¥–æ—á–∫–∞ –ø–æ –≠–ö–ì –∏–ª–∏ –≠–•–û-–ö–ì (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)',], axis = 1)

    # —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –¥—É–±–ª–∏—Ä—É—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    data_eda_1 = data_eda_1.drop(['–ë–ê (–ï–°–¢–¨/–ù–ï–¢)', '–•–û–ë–õ (–ï–°–¢–¨\–ù–ï–¢)', '–ò–ë–°. –°—Ç–µ–Ω–æ–∫–∞—Ä–¥–∏—è (–ï–°–¢–¨\–ù–ï–¢)', '–ò–ë–°. –ü–ò–ö–° (–ï–°–¢–¨\–ù–ï–¢)',
                                '–ê–ì (–ï–°–¢–¨\–ù–ï–¢)', '–•–ë–ü (–ï–°–¢–¨\–ù–ï–¢)', '–ú–µ—Ä—Ü–∞—Ç–µ–ª—å–Ω–∞—è –∞—Ä–∏—Ç–º–∏—è (–ï–°–¢–¨\–ù–ï–¢)',
                                '–û–ñ–ò–†–ï–ù–ò–ï (–ï–°–¢–¨\–ù–ï–¢)', 'BPB –≥–æ–ª–µ–Ω–µ–π (–ï–°–¢–¨/–ù–ï–¢)'], axis = 1)

    # —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫, –ø—Ä–æ–ø—É—Å–∫–∏ –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—Ä—É–¥–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
    data_eda_1 = data_eda_1.drop(['–°–†–ë', '–§–µ—Ä—Ä–∏—Ç–∏–Ω', '–ü—Ä–æ–∫–∞–ª—å—Ü–∏—Ç–æ–Ω–∏–Ω', '–ê–ª—å–±—É–º–∏–Ω',
                                '–õ–∞–∫—Ç–∞—Ç', '–ê–ß–¢–í' ,'–õ–î–ì',
                                '–ú–ù–û', '–§–∏–±—Ä–∏–Ω–æ–≥–µ–Ω', 'D-–¥–∏–º–µ—Ä'], axis = 1)

    # —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
    data_eda_1 = data_eda_1.drop(['–ê–ì, —Å—Ç–∞–¥–∏—è', '–ê–ì, —Ä–∏—Å–∫', '–•–°–ù, –§–ö', '–•–ë–ü (—Ä–∞—Å—á–µ—Ç –ø–æ –°–ö–§)',
                                '–†–æ—Å—Ç, —Å–º', '–í–µ—Å, –∫–≥'], axis = 1)
    # 
    data_eda_1 = data_eda_1.drop(['–¶–≤–µ—Ç–æ–≤–æ–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å', '–ú–æ–ª–Ω—É–ø–∏—Ä–∞–≤–∏—Ä', '–ì–∏–¥—Ä–æ—Ö–ª–æ—Ä—Ç–∏–∞–∑–∏–¥',
                                '–í–∞–ª—Å–∞—Ä—Ç–∞–Ω', '–¢–µ–ª–º–∏—Å–∞—Ä—Ç–∞–Ω', '–ö–∞–Ω–¥–µ—Å–∞—Ä—Ç–∞–Ω',
                                '–ò–∑–æ—Å–æ—Ä–±–∏–¥–∞ –¥–∏–Ω–∏—Ç—Ä–∞—Ç', '–ü–µ—Ä–∏–Ω–¥–æ–ø—Ä–∏–ª', '–†–∞–º–∏–ø—Ä–∏–ª',
                                '–õ–∏–∑–∏–Ω–æ–ø—Ä–∏–ª', '–ö–∞—Ä–≤–µ–¥–∏–ª–æ–ª', '–ê—Ç–µ–Ω–æ–ª–æ–ª',
                                '–í–µ—Ä–∞–ø–∞–º–∏–ª', '–î–∏–ª—Ç–∏–∞–∑–µ–º', '–õ–µ—Ä–∫–∞–º–µ–Ω',
                                '–ò–≤–∞–±—Ä–∞–¥–∏–Ω', '–¢—Ä–∏–º–µ—Ç–∞–∑–∏–¥–∏–Ω', '–í–ü–°' , '–ù–ï–ê–ñ–ë–ü',
                                '–£–¥–ª–∏–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ QT', '–ê–±–ª–∞—Ü–∏—è', '–ú–µ—Ç—Ñ–æ—Ä–º–∏–Ω', '–î–∞–ø–∞–≥–ª–∏—Ñ–ª–æ–∑–∏–Ω', '–¢—Ä–∏–º–µ—Ç–∞–∑–∏–¥–∏–Ω', '–î–∏–≥–æ–∫—Å–∏–Ω', '–ê–º–ª–æ–¥–∏–ø–∏–Ω', '–ë–∏—Å–æ–ø—Ä–æ–ª–æ–ª', '–≠–Ω–∞–ª–∞–ø—Ä–∏–ª', '–†–∞–º–∏–ø—Ä–∏–ª',
                                '–ü–µ—Ä–∏–Ω–¥–æ–ø—Ä–∏–ª', '–ò–∑–æ—Å–æ—Ä–±–∏–¥–∞ –¥–∏–Ω–∏—Ç—Ä–∞—Ç', '–õ–æ–∑–∞—Ä—Ç–∞–Ω', '–°–ø–∏—Ä–æ–Ω–æ–ª–∞–∫—Ç–æ–Ω', '–¢–æ—Ä–∞—Å–µ–º–∏–¥', '–§—É—Ä–æ—Å–µ–º–∏–¥', '–§–∞–≤–∏–ø–∏—Ä–∞–≤–∏—Ä', '–ì–ª–∏–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–º–æ–≥–ª–æ–±–∏–Ω', 
                                ], axis = 1) """,
                                line_numbers = True)

st.markdown(
    """
    –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –æ—à–∏–±–æ—á–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –∫–æ–ª–æ–Ω–∫–∞—Ö, –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–≤–µ–ª–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ —á–∏—Å–ª–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
    """
)
with st.expander("–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"):
    st.code("""
        # –∑–∞–º–µ–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–µ –≤–µ—Ä–Ω–æ
        data_eda_1['BPB –≥–æ–ª–µ–Ω–µ–π'] = data_eda_1['BPB –≥–æ–ª–µ–Ω–µ–π'].replace({'2-3': 2})
        data_eda_1['–ë–ª–æ–∫–∞–¥–∞ –ù–ü –ì–∏—Å—Å–∞'] = data_eda_1['–ë–ª–æ–∫–∞–¥–∞ –ù–ü –ì–∏—Å—Å–∞'].replace({'1-2': 2})
        data_eda_1['AV- –±–ª–æ–∫–∞–¥–∞'] = data_eda_1['AV- –±–ª–æ–∫–∞–¥–∞'].replace({'–ø–æ–ª–Ω–∞—è': 3, '1-2': 1, '2-3': 3})
        data_eda_1['–•–ë–ü (–∏—Å—Ö–æ–¥–Ω)'] = data_eda_1['–•–ë–ü (–∏—Å—Ö–æ–¥–Ω)'].replace({'—Å3–∞-—Å3–±': 'c3a', '—Å2-—Å3': 'c2', '2—Å–∞1': 'c2',
                                                                        '—Å1 –∞3': 'c1'})
        data_eda_1['–ü–µ—Ä–µ–Ω–µ—Å/ –Ω–µ –ø–µ—Ä–µ–Ω–µ—Å –ö–í–ò'] = data_eda_1['–ü–µ—Ä–µ–Ω–µ—Å/ –Ω–µ –ø–µ—Ä–µ–Ω–µ—Å –ö–í–ò'].replace({1: 0, 2:1})


        # –ø—Ä–æ–∏–∑–≤–µ–¥–µ–º —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –¥–∞–Ω–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ
        data_eda_1['–•–ë–ü (–∏—Å—Ö–æ–¥–Ω)'] = data_eda_1['–•–ë–ü (–∏—Å—Ö–æ–¥–Ω)'].replace({'—Å3–∞-—Å3–±': 'c3a', '—Å2-—Å3': 'c2', '2—Å–∞1': 'c2',
                                                                        '—Å1 –∞3': 'c1'})
        data_eda_1['–•–ë–ü (–∏—Å—Ö–æ–¥–Ω)'] = data_eda_1['–•–ë–ü (–∏—Å—Ö–æ–¥–Ω)'].replace({'—Å1': 1, 'c1': 1, 'c2': 2, '—Å2':2, '2–∞': 3,  '—Å3': 4, '—Å3–∞': 5, 'c3a': 5, '—Å3a': 5,'—Å3–±': 6, '—Å4': 7})

            
        data_eda_1['–°–∞—Ö–∞—Ä–Ω—ã–π –¥–∏–∞–±–µ—Ç (–ï–°–¢–¨\–ù–ï–¢)'] = data_eda_1['–°–∞—Ö–∞—Ä–Ω—ã–π –¥–∏–∞–±–µ—Ç (–ï–°–¢–¨\–ù–ï–¢)'].astype('int')
        data_eda_1['–ë–ª–æ–∫–∞–¥–∞ –ù–ü –ì–∏—Å—Å–∞'] = data_eda_1['–ë–ª–æ–∫–∞–¥–∞ –ù–ü –ì–∏—Å—Å–∞'].astype('int')
        data_eda_1['AV- –±–ª–æ–∫–∞–¥–∞'] = data_eda_1['AV- –±–ª–æ–∫–∞–¥–∞'].astype('int')
        data_eda_1['–•–ë–ü (–∏—Å—Ö–æ–¥–Ω)'] = data_eda_1['–•–ë–ü (–∏—Å—Ö–æ–¥–Ω)'].astype('int')
        data_eda_1['–ü–µ—Ä–µ–Ω–µ—Å/ –Ω–µ –ø–µ—Ä–µ–Ω–µ—Å –ö–í–ò'] = data_eda_1['–ü–µ—Ä–µ–Ω–µ—Å/ –Ω–µ –ø–µ—Ä–µ–Ω–µ—Å –ö–í–ò'].astype('int'))

            
        def clean_value(val):
            '''–§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–º–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –∫–æ–ª–æ–Ω–∫–∏ –∏–∑ —á–∏—Å–ª–æ–≤–æ–≥–æ 
            (–ø–æ —Ç–∏–ø—É "35-45") –Ω–∞ 40'''
            try:
                return float(val)
            except ValueError:
                pass
            try:
                parts = val.split('-')
                if len(parts) == 2:
                    return (float(parts[0]) + float(parts[1])) / 2
            except ValueError:
                pass
            return 0

        # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ clean_value –∫ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
        data_eda_1['–•–°–ù –ø–æ —Ñ—Ä–∞–∫—Ü–∏–∏ –≤—ã–±—Ä–æ—Å–∞, %'] = np.array([clean_value(val) for val in data_eda_1['–•–°–ù –ø–æ —Ñ—Ä–∞–∫—Ü–∏–∏ –≤—ã–±—Ä–æ—Å–∞, %']])
        data_eda_1['–•–°–ù –ø–æ —Ñ—Ä–∞–∫—Ü–∏–∏ –≤—ã–±—Ä–æ—Å–∞, %'] = data_eda_1['–•–°–ù –ø–æ —Ñ—Ä–∞–∫—Ü–∏–∏ –≤—ã–±—Ä–æ—Å–∞, %'].astype('float')
            

        # —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–æ–≤ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
        data_eda_1v1['–¢—Ä–æ–º–±–æ—ç–º–±–æ–ª–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º'] = data_eda_1v1['–¢—Ä–æ–º–±–æ—ç–º–±–æ–ª–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º'].astype('int')
        data_eda_1v1['–ì–∏–ø–µ—Ä—Ç—Ä–æ—Ñ–∏—è –º–∏–æ–∫–∞—Ä–¥–∞ –ª–µ–≤–æ–≥–æ –∂–µ–ª—É–¥–æ—á–∫–∞ –ø–æ –≠–ö–ì –∏–ª–∏ –≠–•–û-–ö–ì'] = data_eda_1v1['–ì–∏–ø–µ—Ä—Ç—Ä–æ—Ñ–∏—è –º–∏–æ–∫–∞—Ä–¥–∞ –ª–µ–≤–æ–≥–æ –∂–µ–ª—É–¥–æ—á–∫–∞ –ø–æ –≠–ö–ì –∏–ª–∏ –≠–•–û-–ö–ì'].astype('int')
        """,

        line_numbers = True) 

st.markdown(
    """–î–∞–ª–µ–µ –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –ø—Ä–æ–ø—É—Å–∫–∏. –£–¥–∞–ª–∏–ª–∏ –≤—Å–µ –ø—Ä–æ–ø—É—Å–∫–∏ <= 5%. –ö–æ–ª–æ–Ω–∫–∏ —Å –ø—Ä–æ–ø—É—Å–∫–∞–º–∏ –±–æ–ª—å—à–µ 20% –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏-–∑–∞–≥–ª—É—à–∫–∞–º–∏, –µ—Å–ª–∏ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –º–µ–Ω—å—à–µ - –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –º–µ–¥–∏–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º."""
)

with st.expander("–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–ø–æ—É—Å–∫–æ–≤"):
    st.code("""
    # —É–¥–∞–ª—è–µ–º –ø—Ä–æ–ø—É—Å–∫–∏ –º–µ–Ω—å—à–µ 5%
    data_eda_1v1.dropna(subset=['–í–æ–∑—Ä–∞—Å—Ç', '–≠—Ä–∏—Ç—Ä–æ—Ü–∏—Ç—ã', '–õ–µ–π–∫–æ—Ü–∏—Ç—ã', '–õ–∏–º—Ñ–æ—Ü–∏—Ç—ã% ', '–õ–ò–ú–§–û–¶–ò–¢–´, –ê–ë–° (–†–ê–°–ß–ï–¢ –ü–û –§–û–†–ú–£–õ–ï)',
    '–¢—Ä–æ–º–±–æ—Ü–∏—Ç—ã', '–ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω, –º–∫–º–æ–ª—å/–ª', '–°–ö–§ CKD-EPI (—Ä–∞—Å—á–µ—Ç –ø–æ –æ–±—â–µ–π —Ñ–æ—Ä–º—É–ª–µ)',
    '–°–¢–ï–ü–ï–ù–ò –û–ñ–ò–†–ï–ù–ò–Ø –ü–û –ò–ú–¢', 'BPB –≥–æ–ª–µ–Ω–µ–π', '–¢—Ä–æ–º–±–æ—ç–º–±–æ–ª–∏—á–µ—Å–∫–∏–π —Å–∏–Ω–¥—Ä–æ–º',
    '–ì–∏–ø–µ—Ä—Ç—Ä–æ—Ñ–∏—è –º–∏–æ–∫–∞—Ä–¥–∞ –ª–µ–≤–æ–≥–æ –∂–µ–ª—É–¥–æ—á–∫–∞ –ø–æ –≠–ö–ì –∏–ª–∏ –≠–•–û-–ö–ì', '–ú–µ—Ä—Ü–∞—Ç–µ–ª—å–Ω–∞—è –∞—Ä–∏—Ç–º–∏—è', '–•–°–ù –ø–æ —Ñ—Ä–∞–∫—Ü–∏–∏ –≤—ã–±—Ä–æ—Å–∞, %'], inplace=True)
                

    # –ü—Ä–æ–ø—É—Å–∫–∏ –¥–æ 20% –∑–∞–ø–æ–ª–Ω–∏–º –º–µ–¥–∏–∞–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
    to_median = ['–°–û–≠', '–•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω', '–õ–ü–ù–ü', '–õ–ü–í–ü', '–ò–Ω–¥–µ–∫—Å –∞—Ç–µ—Ä–æ–≥–µ–Ω–Ω–æ—Å—Ç–∏ 2 (—Ñ–æ—Ä–º—É–ª–∞ excel)', '–ì–ª—é–∫–æ–∑–∞', '–ê–õ–¢', '–ê–°–¢', '–ù–∞—Ç—Ä–∏–π—É—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –ø–µ–ø—Ç–∏–¥', ]
    for i in to_median:
        data_eda_1v1.loc[data_eda_1v1[i].isna(), i] = data_eda_1v1.loc[data_eda_1v1[i].notna(), i].median()

    # –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∏ –∑–∞–∫—Ä–æ–µ–º –∑–∞–≥–ª—É—à–∫–∞–º–∏
    to_except = ['–ù–∞—Ç—Ä–∏–π', '–ö–∞–ª–∏–π', '–ú–æ—á–µ–≤–∏–Ω–∞', '–û–±—â–∏–π –±–∏–ª–∏—Ä—É–±–∏–Ω', '–ì–ª–∏–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–µ–º–æ–≥–ª–æ–±–∏–Ω']
    for i in to_except:
        data_eda_1v1.loc[data_eda_1v1[i].isna(), i] = 0
    """, line_numbers = True)


st.markdown(
    """
    –ü–æ—Å–ª–µ –≤—Å–µ—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –∏—Ç–æ–≥–µ —Å–ª–µ–¥—É—é—â–∏–π –¥–∞—Ç–∞—Å–µ—Ç:
    """ 
)
df, _ = transform_df_base()

# –°–æ–∑–¥–∞–µ–º –±—É—Ñ–µ—Ä –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤—ã–≤–æ–¥–∞ df.info()
buffer = StringIO()
df.info(buf=buffer, verbose = True, show_counts = True)

# –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –±—É—Ñ–µ—Ä –≤ —Å—Ç—Ä–æ–∫—É –∏ –≤—ã–≤–æ–¥–∏–º —Å –ø–æ–º–æ—â—å—é st.text()
info_str = buffer.getvalue()

with st.expander("–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞"):
    st.text(info_str)
    st.dataframe(df.head())
    st.dataframe(df.tail())

st.markdown("""
    ## –ü–µ—Ä–µ—Ö–æ–¥ –∫ EDA

    –î–ª—è –Ω–∞—á–∞–ª–∞ –º—ã –æ—Ü–µ–Ω–∏–º –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é –ü–∏—Ä—Å–æ–Ω–∞ –ø–æ –∫–∞–∂–¥–æ–π –∫–æ–ª–æ–Ω–∫–µ –∫ –Ω–∞—à–µ–º—É —Ç–∞—Ä–≥–µ—Ç—É.
    """
)

img = Image.open('./streamlit_app/data/output.png')
st.image(img)

st.markdown(
    """
    –î–∞—Ç–∞—Å–µ—Ç –±—ã–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—â–µ–Ω. –û—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã—Ö 107 –∫–æ–ª–æ–Ω–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å 32, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.
    –ü–æ –º–∞—Ç—Ä–∏—Ü–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –≤–∏–¥–Ω–æ, —á—Ç–æ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ –µ—â—ë –æ—Å—Ç–∞–ª–∏—Å—å –∫–æ–ª–æ–Ω–∫–∏, —Å–ª–∞–±–æ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É—é—â–∏–µ —Å —Ç–∞—Ä–≥–µ—Ç–æ–º –Ω–æ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä–µ—à–µ–Ω–æ –∏—Ö –æ—Å—Ç–∞–≤–∏—Ç—å, —Ç.–∫. –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ–Ω–∏ –º–æ–≥—É –¥–∞—Ç—å —É–∂–µ–µ –¥—Ä—É–≥–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏.

    –ü–æ—Å—Ç—Ä–æ–∏–º –ø–æ–¥—Ä–æ–±–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è –Ω–∞—à–∏—Ö –∫–æ–ª–æ–Ω–æ–∫
    """ 
)

column = st.selectbox('–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞', df.columns)
base_graph(df, column)


st.markdown(
"""
    ### –í—ã–≤–æ–¥—ã

    –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –±–æ–ª—å—à–æ–µ –∫–æ–ª-–≤–æ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏–ª—å–Ω–æ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –Ω–∞ —Ñ–æ–Ω–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.
    –ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, —Ç.–∫. –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –ø–æ–¥–æ–±–Ω—ã–µ —Å–∏–ª—å–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç
    –Ω–æ—Ä–º—ã –∏ –º–µ–¥–∏–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º —á—Ç–æ —É –ø–∞—Ü–∏–µ–Ω—Ç–∞ –µ—Å—Ç—å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏—è –Ω–∞ —Ç–µ –∏–ª–∏ –∏–Ω—ã–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è.
    –ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å –ø–æ–¥–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–æ–∫—Ä—Ç–∞—Ç–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –∏–∑-–∑–∞ —É–¥–∞–ª–µ–Ω–∏—è
    –ø–æ–¥–æ–±–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º —É –ø–∞—Ü–∏–µ–Ω—Ç–∞.
    """
)
